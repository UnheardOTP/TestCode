<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minesweeper</title>
  <style>
    .cell {
      width: 20px;
      height: 20px;
      border: 1px solid #ccc;
      display: inline-block;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="board"></div>
  <script>
    const rows = 10;
    const cols = 10;
    const numMines = 20;

    let board = [];
    let revealed = [];

    function initializeBoard() {
      for (let i = 0; i < rows; i++) {
        board[i] = [];
        revealed[i] = [];
        for (let j = 0; j < cols; j++) {
          board[i][j] = 0;
          revealed[i][j] = false;
        }
      }

      // Place mines randomly
      let minesPlaced = 0;
      while (minesPlaced < numMines) {
        let randRow = Math.floor(Math.random() * rows);
        let randCol = Math.floor(Math.random() * cols);
        if (board[randRow][randCol] !== -1) {
          board[randRow][randCol] = -1;
          minesPlaced++;
        }
      }

      // Calculate neighboring mines count
      for (let i = 0; i < rows; i++) {
        for (let j = 0; j < cols; j++) {
          if (board[i][j] !== -1) {
            let count = 0;
            for (let x = Math.max(0, i - 1); x <= Math.min(i + 1, rows - 1); x++) {
              for (let y = Math.max(0, j - 1); y <= Math.min(j + 1, cols - 1); y++) {
                if (board[x][y] === -1) {
                  count++;
                }
              }
            }
            board[i][j] = count;
          }
        }
      }
    }

    function reveal(row, col) {
      if (row < 0 || row >= rows || col < 0 || col >= cols || revealed[row][col]) {
        return;
      }

      revealed[row][col] = true;

      if (board[row][col] === -1) {
        alert('Game Over!');
        // Reset the game
        initializeBoard();
        renderBoard();
        return;
      }

      if (board[row][col] === 0) {
        for (let x = Math.max(0, row - 1); x <= Math.min(row + 1, rows - 1); x++) {
          for (let y = Math.max(0, col - 1); y <= Math.min(col + 1, cols - 1); y++) {
            reveal(x, y);
          }
        }
      }
    }

    function renderBoard() {
      const boardElement = document.getElementById('board');
      boardElement.innerHTML = '';

      for (let i = 0; i < rows; i++) {
        for (let j = 0; j < cols; j++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          cell.textContent = revealed[i][j] ? board[i][j] : '';
          cell.addEventListener('click', () => reveal(i, j));
          boardElement.appendChild(cell);
        }
        boardElement.appendChild(document.createElement('br'));
      }
    }

    initializeBoard();
    renderBoard();
  </script>
</body>
</html>

